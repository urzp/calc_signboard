<style>
    .select_color{
        opacity: 0.01;
    }
    .btn_color, .btn_font{
        cursor: pointer;
    }
    .btn_font_selected .tn-atom{
        color: #fff!important;
        border-color: #78ddf4!important;
        background-color: #03a3df!important;
    }
</style>

<script>
    let fonts, symbols;
	const URL_FONTS = 'https://fancyneonservis.ru/php/read_fonts.php'
    const URL_SYMBOLS = 'https://fancyneonservis.ru/php/read_symbols.php'
    const AJAX_OPTIONS = {
        type: 'POST',
        headers: { 'Content-Type': 'application/json;charset=utf-8' },
    }

    $( document ).ready(function(){
        init()
    })

    async function init(){
        initFontsPanel()
        initColorPanel()
        initBorderOrintation()
        initSymbols()
    }

    async function initSymbols(){
        symbols = await ajaxReq(URL_SYMBOLS, AJAX_OPTIONS, {})
    }

    async function initFontsPanel(){
        fonts = await ajaxReq(URL_FONTS, AJAX_OPTIONS, {})
        for(let i=1;i<=10;i++){
            let fontName = fonts[i-1].name
            $(`.btn_font_${i}`).addClass('btn_font')
            $(`.btn_font_${i}`).attr({'font':fontName})
            $(`.btn_font_${i} .tn-atom`).text(fontName.split('.')[0])
        }
        $('.btn_font').click(function(){
            $('.btn_font').removeClass('btn_font_selected')
            $(this).addClass('btn_font_selected')
        })
        $('.btn_font_1').click()
    }

    function initColorPanel(){
        for(let i=0;i<=14;i++){
            $(`.select_color_${i}`).addClass('select_color')
            $(`.btn_color_${i}`).addClass('btn_color')
            $(`.btn_color_${i}`).attr({'indexColor':i})
        }
        
        $('.btn_color').click(function(){
            $(`.select_color`).css({'opacity':'0.0'})
            let indexColor = $(this).attr('indexColor')
            $(`.select_color_${indexColor}`).css({'opacity':'1.0'})
        })
    }

    function initBorderOrintation(){
        ready_t_element( '.border_orintation_panel', ()=>{
            border_orintation_action()
            $('.t-input-group').click(function(){
                border_orintation_action()
            })
        })
    }

    function ready_t_element(css_selector, action){
        let id_timer = setInterval(()=>{
            if($(css_selector).length > 0){
                action()
                clearInterval( id_timer )
            } 
        }, 300)
    }

    function border_orintation_action(){
        if($('[value="Горизонтальная"]').is(':checked')){
            $('[value="Горизонтальная"]').parent().find('span').css({'color':'#fff'})
        }else{
            $('[value="Горизонтальная"]').parent().find('span').css({'color':'#555'})
        }
        if($('[value="Вертикальная"]').is(':checked')){
            $('[value="Вертикальная"]').parent().find('span').css({'color':'#fff'})
        }else{
            $('[value="Вертикальная"]').parent().find('span').css({'color':'#555'})
        }
    }

	async function ajaxReq(url, options, content){
        let response = await fetch(url,{
            method: options.type,
            headers: options.heders,
            body: JSON.stringify(content)
        })
        return await response.json();
    }
    
    
</script>